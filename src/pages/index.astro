---
import CTA from "../components/CTA.astro";
import Footer from "../components/Footer.astro";
import MainNav from "../components/MainNav.astro";
import HomeLayout from "../layouts/HomeLayout.astro";
import SectionLayout from "../layouts/SectionLayout.astro";
import SiteData from "../data/sitedata";
import ProjectCard from "../components/ProjectCard.astro";
import SkillCard from "../components/SkillCard.astro";
import { Icon } from "astro-icon/components";
---

<HomeLayout>
  <!-- bg gradient wrapper -->
  <div class="bg-gradient-hero" role="presentation">
    <MainNav />

    <header role="banner">
      <!-- Hero Section -->
      <section
        id="hero"
        class="text-primary-light px-4 relative overflow-hidden"
        aria-labelledby="hero-title"
      >
        <Icon
          name="light-bulb"
          class="absolute -right-15 top-20 w-md h-auto md:top-30 md:-right-25 md:w-lg lg:w-2xl lg:top-5 lg:right-5 z-0"
        />
        <div
          class="max-w-7xl mx-auto text-center flex flex-col items-center justify-center gap-8 pb-24 pt-44 md:pb-44 md:pt-64"
        >
          <!-- Heading -->
          <h1
            id="hero-title"
            class="uppercase font-extrabold text-3xl md:text-4xl xl:text-5xl"
          >
            Converting Ideas Into Working Products.
          </h1>
          <p class="max-w-4xl xl:text-lg text-text-light">
            Full-stack developer specializing in .NET and modern front-end tools
            like React. I focus on building user-friendly apps, and occasionally
            partner with clients to bring their visions to life.
          </p>
          <!-- CTA Buttons -->
          <div class="flex gap-4 mt-14 relative z-10">
            <a href="#portfolio">
              <CTA
                text="My Work"
                className="bg-brand uppercase font-bold py-3 px-8 text-sm sm:text-md xl:text-lg"
              />
            </a>
            <a href="#contact">
              <CTA
                text="Contact Me"
                className="bg-brand-accent uppercase font-bold py-3 px-8 sm:text-md text-sm xl:text-lg"
              />
            </a>
          </div>
        </div>
      </section>
    </header>
  </div>

  <main role="main" id="main-content">
    <!-- About Section -->
    <section
      id="about"
      class="text-primary-light bg-secondary-dark relative z-40"
      aria-labelledby="about-title"
    >
      <SectionLayout
        title="About Me"
        subtitle="I Aim To Build Software That People Actually Like Using"
        titleId="about-title"
      >
        <div class="mt-8 flex flex-col gap-8 text-text-light xl:text-lg">
          <p>
            I’m a self-taught developer who loves making apps that don’t suck. I
            work with .NET and modern front-end technologies, but honestly, I
            care more about whether the thing I build feels easy to use than the
            tools themselves. Furthermore, I’ve messed with code since I was a
            kid—literally broke my toys to see how they worked—and even though
            life got in the way for a bit, I’m all in now. If you’ve got an
            idea, let’s make it real. Websites, apps, whatever. Just don’t ask
            me to build something clunky.
          </p>
          <p>
            Look, I hate using apps that feel like a chore. You know the
            ones—confusing buttons, slow loading, that “why is this even here?”
            feeling. I aim to fix that and build stuff people enjoy. Let’s make
            something that matters, even if it’s small.
          </p>
        </div>
      </SectionLayout>
    </section>

    <!-- Skills & Services -->
    <section
      id="skills"
      aria-labelledby="skills-title"
      class="relative overflow-hidden"
    >
      <Icon
        name="brand-accent"
        class="absolute bottom-0 right-0 w-[1920px] h-auto"
      />
      <SectionLayout
        title="Skills & Services"
        subtitle="Code for Teams, Build for Clients."
        titleId="skills-title"
      >
        <div class="mt-8">
          <p class="text-text-dark xl:text-lg">
            Whether I’m collaborating with developers or working one-on-one with
            clients, I care about solving problems, not just shipping features.
          </p>
        </div>

        <!-- Team Offerings -->
        <article class="mt-20">
          <h3
            class="uppercase text-center text-lg xl:text-xl font-semibold mb-12"
          >
            For Teams:
          </h3>
          <div class="flex flex-col lg:grid grid-cols-3 gap-16">
            {
              SiteData.skills.forTeams.map((skill) => (
                <SkillCard
                  title={skill.title}
                  icon={skill.icon}
                  description={skill.description}
                />
              ))
            }
          </div>
        </article>

        <!-- Client Offerings -->
        <article class="mt-20 lg:mt-36">
          <h3
            class="uppercase text-center text-lg xl:text-xl font-semibold mb-12"
          >
            For Clients:
          </h3>
          <div class="flex flex-col lg:grid grid-cols-3 gap-16">
            {
              SiteData.skills.forClients.map((skill) => (
                <SkillCard
                  title={skill.title}
                  icon={skill.icon}
                  description={skill.description}
                />
              ))
            }
          </div>
        </article>

        <!-- Tools -->
        <article
          class="mt-28 lg:mt-36 flex flex-col items-center text-center gap-8"
        >
          <h4 class="text-xl xl:text-2xl uppercase font-bold">
            Tools Are Just a Means to an End (That End: <span class="text-brand"
              >Happy Users</span
            >).
          </h4>
          <p class="text-text-dark xl:text-lg">
            I pick tools based on your project’s needs, not the latest hype. If
            it solves the problem and keeps users smiling, we’re golden.
          </p>

          <div
            class="mt-8 grid grid-cols-4 md:grid-cols-[repeat(auto-fit,_minmax(0,_1fr))] w-full max-w-xl md:max-w-2xl lg:max-w-3xl xl:max-w-4xl mx-auto place-items-center gap-6"
          >
            {
              SiteData.skills.tools.map((tool) => (
                <Icon
                  name={tool.icon}
                  title={tool.name}
                  class="w-full max-w-20 lg:max-w-24 xl:max-w-28 h-auto"
                />
              ))
            }
          </div>
        </article>
      </SectionLayout>
    </section>

    <!-- Portfolio -->
    <section
      id="portfolio"
      class="bg-gradient-section text-primary-light relative z-0 overflow-hidden w-full h-full"
      aria-labelledby="portfolio-title"
    >
      <Icon
        name="square-bg"
        class="absolute inset-0 w-[1700px] md:w-[250%] lg:w-[200%] xl:w-[140%] h-auto z-0 lg:opacity-80"
      />
      <SectionLayout
        title="Portfolio"
        subtitle="I build apps that solve problems"
        additionalSubtitles={["…and clients who trust me to solve theirs."]}
        titleId="portfolio-title"
      >
        <article class="mt-20">
          <!-- Personal Projects -->
          <div>
            <div>
              <h3 class="font-semibold text-lg xl:text-xl">
                Featured Personal Projects
              </h3>
              <p class="text-text-light xl:text-lg">
                My projects range from fully developed applications to sandbox
                environments where I can investigate new technologies and refine
                my skills.
              </p>
            </div>

            <div
              class="flex flex-col md:grid grid-cols-2 xl:grid-cols-3 gap-4 mt-8 items-center"
            >
              {
                SiteData.projects.personal.map((project) => (
                  <ProjectCard
                    title={project.title}
                    description={project.description}
                    previewImage={project.previewImage}
                    previewUrl={project.previewUrl}
                    githubUrl={project.githubUrl}
                    tags={project.tags}
                    technologies={project.technologies}
                  />
                ))
              }
            </div>
          </div>

          <!-- Client Work -->
          <article class="mt-20">
            <div>
              <h3 class="font-semibold text-lg xl:text-xl">Client Work</h3>
              <p class="text-text-light xl:text-lg">
                Collaborative projects where I adapt to client needs—balancing
                deadlines, budgets, and clean code.
              </p>
            </div>

            <div
              class="flex flex-col md:grid grid-cols-2 lg:grid-cols-3 gap-4 mt-8 items-center"
            >
              {
                SiteData.projects.clientWork.map((project) => (
                  <ProjectCard
                    title={project.title}
                    description={project.description}
                    previewImage={project.previewImage}
                    previewUrl={project.previewUrl}
                    githubUrl={project.githubUrl}
                    tags={project.tags}
                    technologies={project.technologies}
                  />
                ))
              }
            </div>
          </article>
        </article>
      </SectionLayout>
    </section>

    <!-- Contact Section -->
    <section id="contact" aria-labelledby="contact-title">
      <SectionLayout
        title="Contact Me"
        subtitle=""
        titleId="contact-title"
        setTitleHtml={`<span>
            Great things start with a simple ‘
            <span class="text-brand">Hello</span>.’ Let’s begin.
          </span>`}
      >
        <div class="mt-8">
          <p class="text-text-dark xl:text-lg">
            Whether you’re ready to hire me, need a quote for your project, or
            just have some questions, this form is your starting line. Tell me
            what’s on your mind: a freelance gig, a job opportunity, or even a
            “what if?” idea. I’ll respond within 48 hours, and we’ll figure out
            how to turn “hello” into something that matters.
          </p>
        </div>

        <!-- Contact Form -->
        <div class="mt-20">
          <form
            method="POST"
            class="flex flex-col gap-4"
            name="contact"
            data-netlify="true"
            data-netlify-recaptcha="true"
            netlify-honeypot="bot-field"
            onsubmit="return validateCaptchaResponse(event)"
          >
            <div class="flex flex-col md:flex-row md:flex-wrap gap-4">
              <p class="hidden">
                <label>
                  Don't fill this out if you're human: <input
                    name="bot-field"
                  />
                </label>
              </p>
              <label for="name" class="sr-only">Name</label>
              <input
                type="text"
                name="name"
                id="name"
                placeholder="Name"
                required
                class="flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand"
              />
              <label for="email" class="sr-only">Email</label>
              <input
                type="email"
                name="email"
                id="email"
                placeholder="Email"
                required
                class="flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand"
              />
              <label for="subject" class="sr-only">Subject</label>
              <input
                type="text"
                name="subject"
                id="subject"
                placeholder="Subject"
                required
                class="flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brand"
              />
            </div>
            <label for="message" class="sr-only">Message</label>
            <textarea
              name="message"
              id="message"
              rows="4"
              placeholder="Message"
              required
              class="px-4 py-2 border border-gray-300 rounded-md resize-none focus:outline-none focus:ring-2 focus:ring-brand"
            ></textarea>
            <div data-netlify-recaptcha="true"></div>
            <div id="captcha-error" class="text-red-500 text-sm hidden">
              Please complete the captcha before submitting.
            </div>
            <button
              type="submit"
              class="self-start px-6 py-3 bg-brand text-primary-light font-bold uppercase text-sm rounded-md hover:brightness-90 transition-colors duration:200 ease-in-out hover:cursor-pointer max-md:w-full"
            >
              Send Message
            </button>
          </form>
        </div>
      </SectionLayout>
    </section>
    <!-- End of main content -->
  </main>

  <Footer />
</HomeLayout>

<script is:inline>
  function validateCaptchaResponse(event) {
    event.preventDefault();

    if (!window.grecaptcha) {
      console.error("reCAPTCHA not loaded");
      return false;
    }

    const captchaResponse = grecaptcha.getResponse();
    const errorDiv = document.getElementById("captcha-error");

    if (!captchaResponse) {
      errorDiv.classList.remove("hidden");
      return false;
    }

    errorDiv.classList.add("hidden");
    event.target.submit();
    return true;
  }
</script>
